# optional. may be specified as command line argument
mount_dir: /home/hrn/mnt/tgmount1
# client settings
client:
  session: tgfs
  api_id: 123
  api_hash: deadbeed121212121
# caches
caches:
  # will instantiate a single in memory cache
  memory1:
    type: memory
    capacity: 50MB
    block_size: 128KB
# every source is a separate get_messages request
message_sources:
  tmtc:
    entity: tgmounttestingchannel
    # filter: InputMessagesFilterMusic
  ru2chmu:
    entity: ru2chmu
    limit: 500
    reverse: False
    updates: True
  ru_python:
    entity: ru_python
    limit: 500
  NappingCat_Chat:
    entity: NappingCat_Chat
    limit: 500
  ru_python_beginners:
    entity: ru_python_beginners
    limit: 500
  my-mount:
    entity: -1001678896566
# definiton
ogranized: &ogranized
  filter: { filter: [OnlyUniqueDocs], recursive: True }
  # cache: { cache: memory1, filter: { ByExtension: .zip }, recursive: True }
  docs:
    filter:
      - MessageWithOtherDocument
      - Not:
          - ByExtension: .zip
  audio:
    music:
      filter: MessageWithMusic
    voices:
      filter: MessageWithVoice
  music:
    filter: MessageWithMusic
  unpacked:
    filter: MessageWithZip
    # it's recommended to use cache with ZipsAsDirs. otherwise it is slow
    cache: memory1
    wrappers:
      - ZipsAsDirs:
          recursive: True
          skip_folder_if_single_subfolder: True
          hide_sources: True
  zips:
    filter: MessageWithZip
  personal:
    filter:
      Union: [MessageWithKruzhochek, MessageWithVoice]
  video:
    filter: MessageWithVideoFile
  images:
    filter:
      Union: [MessageWithDocumentImage, MessageWithCompressedPhoto]
  stickers:
    filter:
      Union: [MessageWithAnimated, MessageWithSticker]
  messages:
    filter: MessageWithText
    treat_as: MessageWithText
  all:
    filter: All
  music-by-performer:
    filter:
      - MessageWithMusic
    producer:
      MusicByPerformer: { minimum: 2 }
  forwareded-video:
    filter:
      And: [MessageForwarded, MessageWithVideo]
  forwareded:
    filter: MessageForwarded
    producer: MessageByForward
by-sender: &by-sender
  filter: All
  producer:
    MessageBySender:
      minimum: 2
      sender_root:
        <<: *ogranized
        wrappers: ExcludeEmptyDirs
root:
  ru2chmu:
    source: { source: ru2chmu, recursive: True }
    <<: *ogranized
    by-sender: *by-sender
  ru_python:
    source: { source: ru_python, recursive: True }
    <<: *ogranized
    by-sender: *by-sender
  # tmtc:
  #   source: { source: tmtc, recursive: True }
  #   <<: *ogranized
  ru_python_beginners:
    source: { source: ru_python_beginners, recursive: True }
    <<: *ogranized
    by-sender: *by-sender
  NappingCat_Chat:
    source: { source: NappingCat_Chat, recursive: True }
    <<: *ogranized
    by-sender: *by-sender
  my-mount:
    source: { source: my-mount, recursive: True }
    <<: *ogranized
