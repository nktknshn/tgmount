# optional. may be specified as command line argument
mount_dir: /home/hrn/mnt/tgmount1
# client settings
client:
  session: tgfs
  api_id: 123
  api_hash: deadbeed121212121
# caches
caches:
  # will instantiate a single in memory cache
  memory1:
    type: memory
    capacity: 50MB
    block_size: 128KB
# every source is a separate get_messages request
message_sources:
  tmtc:
    entity: tgmounttestingchannel
    # filter: InputMessagesFilterMusic
  ru2chmu:
    entity: ru2chmu
    limit: 300
    reverse: False
    updates: True
# dir content wrappers
wrappers:
  zip1:
    type: zips_as_dirs
    recursive: True
    skip_folder_if_single_subfolder: True
    hide_sources: True
# root
ogranized: &ogranized
  filter: { filter: [OnlyUniqueDocs], recursive: True }
  docs:
    filter:
      - MessageWithOtherDocument
      - Not:
          - ByExtension: .zip
  music:
    filter: MessageWithMusic
  unpacked:
    filter: MessageWithZip
    cache: memory1
    wrappers: zip1
  zips:
    filter: MessageWithZip
  personal:
    filter:
      Union: [MessageWithKruzhochek, MessageWithVoice]
  video:
    filter: MessageWithVideoFile
  images:
    filter:
      Union: [MessageWithDocumentImage, MessageWithCompressedPhoto]
  stickers:
    filter:
      Union: [MessageWithAnimated, MessageWithSticker]
  all:
    filter: All
  music-by-performer:
    filter:
      - MessageWithMusic
      # - Last: 30
    producer:
      MusicByPerformer: { minimum: 2 }
  by-sender:
    filter: All
    producer:
      MessageBySender: { minimum: 2 }

root:
  ru2chmu:
    source: { source: ru2chmu, recursive: True }
    <<: *ogranized
  tmtc:
    source: { source: tmtc, recursive: True }
    <<: *ogranized
